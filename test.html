<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>lazyfill TEST</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="./mod.js" xtype=module></script>
  <script src="./htmlfills.js" type=module></script>
</head>
<body>



<script style="display:block; white-space: pre-wrap; background:#eee; margin:1rem; padding:1rem;" type=module>

const body = document.body;

body.innerHTML += 'no polyfill loaded so far.<br>';

setTimeout(function(){
  body.innerHTML += "executing ['x','y','z'].at(-1) loads the polyfill<br>";

  var item = ['x','y','z'].at(-1);

  body.innerHTML += "result: "+item;


  const korean = new Intl.Locale('ko', {
    script: 'Kore', region: 'KR', hourCycle: 'h24', calendar: 'gregory'
  });
  const japanese = new Intl.Locale('ja-Jpan-JP-u-ca-japanese-hc-h12');
  console.log(korean.baseName, japanese.baseName);
  // expected output: "ko-Kore-KR" "ja-Jpan-JP"
  console.log(korean.hourCycle, japanese.hourCycle);
  // expected output: "h24" "h12"

}, 1000);


/* is connected tests */

const div = document.createElement('div');
console.log(div.isConnected);
document.body.appendChild(div)
console.log(div.isConnected);

console.log('abacad'.replaceAll(/(a)/g, 'x$x'));
console.log('abacad'.replaceAll('a','x'));

console.log(crypto.randomUUID());


console.log('URLPattern:');
const pattern = new URLPattern('http{s}?://*.example.com/books/:id');
console.log(pattern.test('https://store.example.com/books/123') === true);
console.log(pattern.test('https://example.com/books/123') === false);

cookieStore.set('test', 'xyz');
cookieStore.get('test').then(console.log);

/*
Set methods
let S12 = new Set(['1','2']);
let S23 = new Set(['2','3']);

console.log(S12.difference(S23))
*/

var inputValue = `<p>hi! <svg/onload="alert(1)" />well <em>please</em> <a href="javascript:alert(2)" title="pretty-please">click me!</a>`;
var contextEl = document.createElement('div');
contextEl.setHTML(inputValue, { sanitizer: new Sanitizer() });
console.log(contextEl.innerHTML)


console.log([1,2,3].toReversed());

</script>


<button onclick="dialogDemo.showModal()">showModal</button><br>

<dialog id=dialogDemo>
  Hello World
</dialog>

<button onclick="dialogDemo2.showModal()">showModal</button><br>

<dialog id=dialogDemo2>
  Hello demo
</dialog>


<div inert>
  <h2>inert</h2>
  <label>
    text selectable?
    <input value="focusable?">
  </label>
</div>

<div focusgroup>
  <h2>focusgroup</h2>
  <label>
    arrow navigatable?
    <input type="checkbox">
    <input type="checkbox">
  </label>
</div>

<button onclick="navigator.share({title:'title',text:'text',url:location.href})">share</button>
